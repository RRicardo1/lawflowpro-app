<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - LawFlowPro</title>
    <link rel="stylesheet" href="css/shared.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html" class="logo">
                    <div class="logo-icon">⚖️</div>
                    LawFlowPro
                </a>
                
                <ul class="nav-links">
                    <li><a href="products.html">Products</a></li>
                    <li><a href="solutions.html">Solutions</a></li>
                    <li><a href="templates.html">Templates</a></li>
                    <li><a href="pricing.html">Pricing</a></li>
                    <li><a href="enterprise.html">Enterprise</a></li>
                    <li><a href="resources.html">Resources</a></li>
                </ul>
                
                <div class="nav-buttons">
                    <a href="login.html" class="btn btn-secondary active">Log in</a>
                    <button class="btn btn-primary" onclick="realSignup()">Sign up for free</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Login Section -->
    <section style="padding: 80px 0; background: #FFFEFB;">
        <div class="container">
            <div style="max-width: 400px; margin: 0 auto;">
                
                <!-- Login Form -->
                <div class="content-card" style="text-align: center;">
                    <h1 style="margin-bottom: 8px;">Welcome back</h1>
                    <p style="color: #6B7280; margin-bottom: 32px;">Sign in to your LawFlowPro account</p>
                    
                    <form id="login-form" style="text-align: left;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Email</label>
                            <input type="email" id="email" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Enter your email">
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Password</label>
                            <input type="password" id="password" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Enter your password">
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; font-size: 14px;">
                            <label style="display: flex; align-items: center; gap: 8px; color: #6B7280;">
                                <input type="checkbox" style="accent-color: #FF4F00;"> Remember me
                            </label>
                            <a href="#" style="color: #FF4F00; text-decoration: none;">Forgot password?</a>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
                            Sign in
                        </button>
                    </form>
                    
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="position: relative; margin: 24px 0;">
                            <div style="position: absolute; inset: 0; display: flex; align-items: center;">
                                <div style="width: 100%; border-top: 1px solid #ECEAE3;"></div>
                            </div>
                            <div style="position: relative; display: flex; justify-content: center; font-size: 14px;">
                                <span style="background: white; padding: 0 16px; color: #6B7280;">Or continue with</span>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-secondary" style="width: 100%; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; gap: 12px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                            </svg>
                            Continue with Google
                        </button>
                    </div>
                    
                    <div style="text-align: center; font-size: 14px; color: #6B7280;">
                        Don't have an account? 
                        <button onclick="showSignupForm()" style="background: none; border: none; color: #FF4F00; cursor: pointer; text-decoration: underline; font-size: 14px;">
                            Sign up for free
                        </button>
                    </div>
                </div>

                <!-- Signup Form (hidden by default) -->
                <div id="signup-form" class="content-card" style="margin-top: 24px; display: none;">
                    <h1 style="margin-bottom: 8px; text-align: center;">Create Your Account</h1>
                    <p style="color: #6B7280; margin-bottom: 32px; text-align: center;">Start your free month with LawFlowPro</p>
                    
                    <form id="real-signup-form" style="text-align: left;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Full Name</label>
                            <input type="text" id="signup-name" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Enter your full name">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Email</label>
                            <input type="email" id="signup-email" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Enter your email">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Password</label>
                            <input type="password" id="signup-password" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Create a password">
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Law Firm Name</label>
                            <input type="text" id="signup-business" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;"
                                placeholder="Enter your law firm name">
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <label style="display: block; font-weight: 500; margin-bottom: 8px; color: #201515;">Practice Area</label>
                            <select id="signup-practice" required 
                                style="width: 100%; padding: 12px; border: 1px solid #ECEAE3; border-radius: 8px; font-size: 16px; background: white;">
                                <option value="">Select your practice area</option>
                                <option value="Personal Injury">Personal Injury</option>
                                <option value="Corporate Law">Corporate Law</option>
                                <option value="Family Law">Family Law</option>
                                <option value="Criminal Defense">Criminal Defense</option>
                                <option value="Real Estate">Real Estate</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 20px;">
                            Start Free Month
                        </button>
                    </form>
                    
                    <div style="text-align: center; font-size: 14px; color: #6B7280;">
                        Already have an account? 
                        <button onclick="showLoginForm()" style="background: none; border: none; color: #FF4F00; cursor: pointer; text-decoration: underline; font-size: 14px;">
                            Sign in
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Preview -->
    <section style="padding: 60px 0; background: white;">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 40px;">What you'll get access to</h2>
            
            <div class="content-grid grid-3">
                <div style="text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 16px; background: #FF4F00; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">🤖</div>
                    <h4>AI Email Processing</h4>
                    <p style="color: #6B7280; font-size: 14px;">Automatically classify and prioritize your emails with 95% accuracy</p>
                </div>
                
                <div style="text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 16px; background: #FF4F00; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">✍️</div>
                    <h4>Smart Responses</h4>
                    <p style="color: #6B7280; font-size: 14px;">Generate professional responses that match your business tone</p>
                </div>
                
                <div style="text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 16px; background: #FF4F00; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">⚡</div>
                    <h4>Workflow Automation</h4>
                    <p style="color: #6B7280; font-size: 14px;">Create custom workflows to automate repetitive business tasks</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-brand">
                        <div class="logo-icon">⚖️</div>
                        <span style="font-weight: bold; font-size: 18px;">LawFlowPro</span>
                    </div>
                    <p style="color: #9CA3AF; max-width: 300px;">AI-powered legal practice synchronization platform built specifically for attorneys and law firms.</p>
                </div>
                
                <div>
                    <ul class="footer-links">
                        <h4>Products</h4>
                        <li><a href="products.html">AI Workflows</a></li>
                        <li><a href="#" onclick="testAPI('classify')">Email Processing</a></li>
                        <li><a href="#" onclick="testAPI('integration')">Integrations</a></li>
                        <li><a href="#">Analytics</a></li>
                    </ul>
                </div>
                
                <div>
                    <ul class="footer-links">
                        <h4>Solutions</h4>
                        <li><a href="solutions.html">Law Firms</a></li>
                        <li><a href="solutions.html">Real Estate</a></li>
                        <li><a href="solutions.html">Small Business</a></li>
                        <li><a href="solutions.html">Consulting</a></li>
                    </ul>
                </div>
                
                <div>
                    <ul class="footer-links">
                        <h4>Resources</h4>
                        <li><a href="resources.html">Help Center</a></li>
                        <li><a href="resources.html">Blog</a></li>
                        <li><a href="resources.html">API Docs</a></li>
                        <li><a href="resources.html">Community</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div>© 2025 LawFlowPro. All rights reserved.</div>
                <div>
                    <a href="#" style="margin-right: 24px;">Privacy Policy</a>
                    <a href="#" style="margin-right: 24px;">Terms</a>
                    <a href="#">Security</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div class="modal" id="api-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>API Response</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="response-content" id="response-content"></div>
        </div>
    </div>

    <script src="js/shared.js"></script>
    <script>
        // Login form handler
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch('http://localhost:3001/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (data.success && data.data.accessToken) {
                    userToken = data.data.accessToken;
                    alert('✅ Login successful! Welcome back.');
                    // In a real app, you would redirect to dashboard
                    window.location.href = 'index.html';
                } else {
                    showModal(JSON.stringify(data, null, 2));
                }
            } catch (error) {
                showModal(`Login Error: ${error.message}`);
            }
        });
        
        // Form switching functions
        function showSignupForm() {
            document.getElementById('signup-form').style.display = 'block';
            document.querySelector('.content-card').style.display = 'none';
        }
        
        function showLoginForm() {
            document.getElementById('signup-form').style.display = 'none';
            document.querySelector('.content-card').style.display = 'block';
        }
        
        // Signup form handler
        document.getElementById('real-signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const businessName = document.getElementById('signup-business').value;
            const businessType = document.getElementById('signup-practice').value;
            
            try {
                const response = await fetch('http://localhost:3001/api/auth/signup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        name, 
                        email, 
                        password, 
                        businessName, 
                        businessType 
                    })
                });
                
                const data = await response.json();
                
                if (data.success && data.data.accessToken) {
                    userToken = data.data.accessToken;
                    
                    // Show success message
                    const banner = document.createElement('div');
                    banner.style.cssText = 'position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#10B981;color:white;padding:12px 24px;border-radius:8px;z-index:10000;box-shadow:0 4px 12px rgba(0,0,0,0.15)';
                    banner.innerHTML = '✅ Account created! Welcome to LawFlowPro.';
                    document.body.appendChild(banner);
                    
                    setTimeout(() => {
                        banner.remove();
                        window.location.href = 'index.html';
                    }, 2000);
                } else {
                    showModal(JSON.stringify(data, null, 2));
                }
            } catch (error) {
                showModal(`Signup Error: ${error.message}`);
            }
        });

        // Set active navigation
        setActiveNav('login.html');
        
        // Check for signup parameter
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('signup') === 'true') {
            showSignupForm();
        }
    </script>
</body>
</html>